<!-- <app-dynamic-forms [jsonFormData]="formData" [styleClass]="'personal'"></app-dynamic-forms> -->

<form [formGroup]="personalFormGroup" (ngSubmit)="onSubmit()">
    <div class="form-row personal">
        <div class="form-group col-1">
            <label>Your First Name <sup>*</sup></label>
            <input type="text" placeholder="Enter your first name" formControlName="firstName" required>
            @if(getControl("firstName").touched && getControl("firstName").errors){
            <div class="error-messages">
                @if (getControl("firstName").errors?.['required']) {
                <small class="error">This field is required.</small>
                }
            </div>
            }
        </div>
        <div class="form-group col-2">
            <label>Your Last Name <sup>*</sup></label>
            <input type="text" placeholder="Enter your last name" formControlName="lastName" required>

            @if(getControl("lastName").touched && getControl("lastName").errors){
            <div class="error-messages">
                @if (getControl("lastName").errors?.['required']) {
                <small class="error">This field is required.</small>
                }

            </div>
            }
        </div>

        <div class="form-group col-3">
            <label>Gender <sup>*</sup></label>
            <select class="form-select noBorderInput" aria-label="gender" placeholder="Select your Gender"
                formControlName="gender">
                @for(item of genderList;track item.value){
                <option [value]="item.id">{{item.value}}</option>
                }
            </select>
            @if(getControl("gender").touched && getControl("gender").errors){
            <div class="error-messages">
                @if (getControl("gender").errors?.['required']) {
                <small class="error">This field is required.</small>
                }

            </div>
            }
        </div>
        <div class="form-group col-4">
            <label>Date of Birth <sup>*</sup></label>
            <div class="input-group dateTime mb-3">
                <input type="text" class="form-control" formControlName="dateOfBirth"
                    placeholder="Enter your Date of Birth" readonly />
                <button class="btn btn-outline-secondary" type="button" id="button-addon2">
                    <img class="iconType" src="/img/icons/calendar.svg" alt="calender">
                    <input type="date" class="hiddenDateInput" (change)="formatDate($event,'dateOfBirth')" />
                </button>
            </div>
            @if(getControl("dateOfBirth").touched && getControl("dateOfBirth").errors){
            <div class="error-messages">
                @if (getControl("dateOfBirth").errors?.['required']) {
                <small class="error">This field is required.</small>
                }

            </div>
            }

        </div>
        <div class="form-group col-5">
            <label>Spouse Name</label>
            <input type="text" placeholder="Enter your spouse's name" formControlName="spouseName">
        </div>


        <div class="input-group form-group col-6">
            <label>Phone Number <sup>*</sup></label>
            <div class="d-flex input-group mb-3">
                <input class="form-control noBorderInput flex-02" placeholder="eg : +91" formControlName="countryCode"
                    [ngbTypeahead]="search" (focus)="focus$.next($any($event).target.value)"
                    (click)="click$.next($any($event).target.value)" />

                <input class="form-control flex-1 noBorderInput" placeholder="Enter your phone number"
                    formControlName="phoneNumber" />
            </div>
            @if(getControl("countryCode").touched && getControl("countryCode").errors){
            <div class="error-messages">
                @if (getControl("countryCode").errors?.['required']) {
                <small class="error">This field is required.</small>
                }
            </div>
            }
            @if(getControl("phoneNumber").touched && getControl("phoneNumber").errors){
            <div class="error-messages">
                @if (getControl("phoneNumber").errors?.['required']) {
                <small class="error">This field is required.</small>
                }
                @if (getControl("phoneNumber").errors?.['minLength']) {
                <small class="error">Minimum length {{
                    getControl("phoneNumber").errors?.['minLength'].requiredLength }} required.</small>
                }
            </div>
            }
        </div>

        <div class="form-group col-7">
            <label>Email <sup>*</sup></label>
            <input type="email" placeholder="Enter your email address" formControlName="email">
            @if(getControl("email").touched && getControl("email").errors){
            <div class="error-messages">
                @if (getControl("email").errors?.['required']) {
                <small class="error">This field is required.</small>
                }

                @if (getControl("email").errors?.['pattern']) {
                <small class="error">Invalid format.</small>
                }
            </div>
            }
        </div>
        <div class="form-group col-8">
            <label>Address <sup>*</sup></label>
            <input type="text" placeholder="Enter your current address" formControlName="address">
            @if(getControl("address").touched && getControl("address").errors){
            <div class="error-messages">
                @if (getControl("address").errors?.['required']) {
                <small class="error">This field is required.</small>
                }

            </div>
            }
        </div>

        <div class="form-group col-10">
            <label>State / City <sup>*</sup></label>
            <div class="d-flex input-group dataListInputs mb-3">
                <input class="form-control noBorderInput" placeholder="Enter your state or city"
                    formControlName="stateCity" [ngbTypeahead]="searchCities" (selectItem)="onCitySelect($event)">
                @if (searching){
                <button class="btn btn-outline-secondary" type="button" id="button-addon2">
                    <img class="iconType" src="/img/searchLoader.gif" alt="calender">
                </button>
                }
            </div>
            @if(getControl("stateCity").touched && getControl("stateCity").errors){
            <div class="error-messages">
                @if (getControl("stateCity").errors?.['required']) {
                <small class="error">This field is required.</small>
                }
            </div>
            }
        </div>
        <div class="form-group col-9">
            <label>Country <sup>*</sup></label>
            <input type="text" placeholder="Enter your country" formControlName="country">
            @if(getControl("country").touched && getControl("country").errors){
            <div class="error-messages">
                @if (getControl("country").errors?.['required']) {
                <small class="error">This field is required.</small>
                }

                @if (getControl("country").errors?.['pattern']) {
                <small class="error">Invalid format.</small>
                }
            </div>
            }
        </div>
        <div class="form-group col-11">
            <label>Passport Number <sup>*</sup></label>
            <input type="text" placeholder="Enter your passport number" formControlName="passportNumber">
            @if(getControl("passportNumber").touched && getControl("passportNumber").errors){
            <div class="error-messages">
                @if (getControl("passportNumber").errors?.['required']) {
                <small class="error">This field is required.</small>
                }

            </div>
            }
        </div>
        <div class="form-group col-12">
            <label>Country of Issue <sup>*</sup></label>
            <input type="text" placeholder="Enter the country of issue" formControlName="countryOfIssue">
            @if(getControl('countryOfIssue').touched && getControl('countryOfIssue').errors){
            <div class="error-messages">
                @if (getControl('countryOfIssue').errors?.['required']) {
                <small class="error">This field is required.</small>
                }

                @if (getControl('countryOfIssue').errors?.['pattern']) {
                <small class="error">Invalid format.</small>
                }
            </div>
            }
        </div>
        <div class="form-group col-13">
            <label>Issue Date <sup>*</sup></label>
            <div class="input-group dateTime mb-3">
                <input type="text" class="form-control" formControlName="issueDate" placeholder="Enter issue Date"
                    readonly />
                <button class="btn btn-outline-secondary" type="button" id="button-addon2">
                    <img class="iconType" src="/img/icons/calendar.svg" alt="calender">
                    <input type="date" class="hiddenDateInput" (change)="formatDate($event,'issueDate')" />
                </button>
            </div>
            @if(getControl('issueDate').touched && getControl('issueDate').errors){
            <div class="error-messages">
                @if (getControl('issueDate').errors?.['required']) {
                <small class="error">This field is required.</small>
                }

            </div>
            }
        </div>
        <div class="form-group col-14">
            <label>Expiry Date <sup>*</sup></label>
            <div class="input-group dateTime mb-3">
                <input type="text" class="form-control" formControlName="expiryDate" placeholder="Enter expiry date"
                    readonly />
                <button class="btn btn-outline-secondary" type="button" id="button-addon2">
                    <img class="iconType" src="/img/icons/calendar.svg" alt="calender">
                    <input type="date" class="hiddenDateInput" (change)="formatDate($event,'expiryDate')" />
                </button>
            </div>
            @if(getControl('expiryDate').touched && getControl('expiryDate').errors){
            <div class="error-messages">
                @if (getControl('expiryDate').errors?.['required']) {
                <small class="error">This field is required.</small>
                }
            </div>
            }
        </div>
    </div>
    <div class="flex text-center my-5">
        <button class="btn style-four" type="submit" [disabled]="personalFormGroup.invalid">Save & Submit</button>
    </div>
</form>